"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2504],{1152:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>a});var i=t(5893),s=t(1151);const o={id:"podlet_to_podlet_communication",title:"Podlet To Podlet Communication In The Browser"},d=void 0,r={id:"podlet/podlet_to_podlet_communication",title:"Podlet To Podlet Communication In The Browser",description:"For situations where 2 or more podlets need to communicate with each other without a page refresh, Podium provides a client side library called @podium/browser that provides a pubsub class called MessageBus.",source:"@site/docs/podlet/podlet_to_podlet_communication.md",sourceDirName:"podlet",slug:"/podlet/podlet_to_podlet_communication",permalink:"/docs/podlet/podlet_to_podlet_communication",draft:!1,unlisted:!1,editUrl:"https://github.com/podium-lib/podium-lib.github.io/tree/main/website/docs/docs/podlet/podlet_to_podlet_communication.md",tags:[],version:"current",frontMatter:{id:"podlet_to_podlet_communication",title:"Podlet To Podlet Communication In The Browser"},sidebar:"sidebar",previous:{title:"Local Development",permalink:"/docs/podlet/local_development"},next:{title:"Getting Started",permalink:"/docs/layout/getting_started"}},l={},a=[{value:"Getting Started",id:"getting-started",level:2},{value:"Installation",id:"installation",level:3},{value:"Import and Initialize",id:"import-and-initialize",level:3},{value:"Publishing Events",id:"publishing-events",level:3},{value:"Subscribing to Events",id:"subscribing-to-events",level:3}];function c(e){const n={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["For situations where 2 or more podlets need to communicate with each other without a page refresh, Podium provides a client side library called ",(0,i.jsx)(n.code,{children:"@podium/browser"})," that provides a pubsub class called ",(0,i.jsx)(n.code,{children:"MessageBus"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"To illustrate by way of an example, if podlet A. contains an input field wherein a user can input a new reminder and podlet B. contains a list of all reminders, when a user inputs a new reminder into the area of the page that is rendered by podlet A. he or she would expect that the reminders list controlled by podlet B. would immediately be updated with the newly input reminder."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"MessageBus"})," provides a simple mechanism for a podlet to publish events or to subscribe to receive events, in the browser, whenever they occur. To continue with our example above, podlet B. would subscribe to receive new reminder events so that when a user inputs a new reminder, Podlet A. would publish a new reminder event. Podlet B. would then immediately receive that event and be able to react by updating the reminder list with a new reminder."]}),"\n",(0,i.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,i.jsx)(n.h3,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(n.p,{children:"To get started, install the Podium browser package"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"npm install @podium/browser\n"})}),"\n",(0,i.jsx)(n.h3,{id:"import-and-initialize",children:"Import and Initialize"}),"\n",(0,i.jsxs)(n.p,{children:["Then in your podlet's client side JavaScript code, import the ",(0,i.jsx)(n.code,{children:"MessageBus"})," class from the browser package and then create a new instance of the class."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"import { MessageBus } from '@podium/browser';\n\nconst messageBus = new MessageBus();\n"})}),"\n",(0,i.jsx)(n.h3,{id:"publishing-events",children:"Publishing Events"}),"\n",(0,i.jsxs)(n.p,{children:["To publish an event, call the ",(0,i.jsx)(n.code,{children:"publish"})," method and pass a ",(0,i.jsx)(n.code,{children:"channel"}),", a ",(0,i.jsx)(n.code,{children:"topic"})," and any data you want subscribers to receive."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"messageBus.publish(channel, topic, payload);\n"})}),"\n",(0,i.jsxs)(n.p,{children:["In our example reminder app, podlet A. might listen for the user to click an ",(0,i.jsx)(n.code,{children:"add"})," button on the page, read the reminder text from an input field, and then publish an event like so:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"document.getElementById('add-btn').on('click', () => {\n    const reminder = document.getElementById('new-reminder-field').value;\n    messageBus.publish('reminders', 'newReminder', reminder);\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"subscribing-to-events",children:"Subscribing to Events"}),"\n",(0,i.jsxs)(n.p,{children:["To subscribe to events for a particular channel and topic, call the ",(0,i.jsx)(n.code,{children:"subscribe"})," method passing it the ",(0,i.jsx)(n.code,{children:"channel"}),", ",(0,i.jsx)(n.code,{children:"topic"})," and a callback function to be executed whenever an event occurs. Whenever the callback is executed, it gets passed an ",(0,i.jsx)(n.code,{children:"event"})," object which has the properties ",(0,i.jsx)(n.code,{children:"channel"}),", ",(0,i.jsx)(n.code,{children:"topic"})," and ",(0,i.jsx)(n.code,{children:"payload"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"messageBus.subscribe(channel, topic, event => {});\n"})}),"\n",(0,i.jsx)(n.p,{children:"In our example reminder app, podlet B. might listen for new reminder events and then update the list of reminders on the page like so:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"messageBus.subscribe('reminders', 'newReminder', event => {\n    const li = document.createElement('li').innerHTML = event.payload;\n    document.getElementById('reminders-list').append(li);\n});\n"})})]})}function p(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>r,a:()=>d});var i=t(7294);const s={},o=i.createContext(s);function d(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);