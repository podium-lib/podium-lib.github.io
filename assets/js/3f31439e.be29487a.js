"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4251],{6009:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});var n=t(5893),o=t(1151);const a={id:"assets",title:"Assets"},l=void 0,i={id:"layout/assets",title:"Assets",description:"One of the key challenges when using micro-frontend systems like Podium is how to handle client side assets in each page fragment when everything is stitched together into a page.",source:"@site/docs/layout/assets.md",sourceDirName:"layout",slug:"/layout/assets",permalink:"/docs/layout/assets",draft:!1,unlisted:!1,editUrl:"https://github.com/podium-lib/podium-lib.github.io/tree/main/website/docs/docs/layout/assets.md",tags:[],version:"current",frontMatter:{id:"assets",title:"Assets"},sidebar:"sidebar",previous:{title:"Passing URL params and query string values to podlets",permalink:"/docs/layout/dynamic_routes"},next:{title:"Local Development",permalink:"/docs/layout/local_development"}},r={},d=[{value:"Approach 1: podlet serves its own assets",id:"approach-1-podlet-serves-its-own-assets",level:2},{value:"Approach 2: upload to a CDN or remote server",id:"approach-2-upload-to-a-cdn-or-remote-server",level:2}];function c(e){const s={a:"a",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.p,{children:"One of the key challenges when using micro-frontend systems like Podium is how to handle client side assets in each page fragment when everything is stitched together into a page."}),"\n",(0,n.jsx)(s.p,{children:"In the Podium world, a podlet may need to ship with client side JavaScript and/or CSS and when a layout consumes that podlet, it will also need to consume the podlet's JavaScript and/or CSS."}),"\n",(0,n.jsx)(s.p,{children:"Podium itself does not provide support for asset related tasks such as bundling or minification but we are currently iterating over better general solutions to these problems which will be published and documented as soon as they are ready."}),"\n",(0,n.jsx)(s.p,{children:"While there are many ways to do so, the following examples illustrate a couple of possibilities for how you might tackle the asset problem currently. Both examples shown here share the same set of challenges:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"how to isolate styling or behavior"}),"\n",(0,n.jsx)(s.li,{children:"how to handle duplication of shared libraries such as React"}),"\n",(0,n.jsx)(s.li,{children:"how to minimize client asset size and number of requests."}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"approach-1-podlet-serves-its-own-assets",children:"Approach 1: podlet serves its own assets"}),"\n",(0,n.jsx)(s.p,{children:"This approach involves each podlet serving its assets so that the layout can then include these files in its HTML template.\nCurrently, this will only work if your podlets are publically available and dont require proxying to work though future changes may be made to suppor this feature."}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Step 1."})}),"\n",(0,n.jsx)(s.p,{children:"In your podlet, use the podlet asset helper functions to define inline client code."}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.em,{children:"Example"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"podlet.js({ value: `http://my-podlet.com/assets/scripts.js` });\npodlet.css({ value: `http://my-podlet.com/assets/styles.js` });\n"})}),"\n",(0,n.jsx)(s.p,{children:"Each of these functions can be called multiple times to add additional assets. For each call, you may also set a type (which will default to 'default' if not specified)"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.em,{children:"Example"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"podlet.js({ value: `http://my-podlet.com/assets/scripts1.js`, type: 'esm' });\npodlet.js({\n    value: `http://my-podlet.com/assets/scripts2.js`,\n    type: 'default',\n});\n"})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Step 2."})}),"\n",(0,n.jsxs)(s.p,{children:["Serve the assets from express.\nAssuming the podlets client side assets have been placed in a directory called ",(0,n.jsx)(s.code,{children:"assets"}),":"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"app.use('/assets', express.static('assets'));\n"})}),"\n",(0,n.jsxs)(s.p,{children:["See the ",(0,n.jsx)(s.a,{href:"https://expressjs.com/en/starter/static-files.html",children:"express documentation"})," for more information."]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Step 3."})}),"\n",(0,n.jsxs)(s.p,{children:["Write your layout using the ",(0,n.jsx)(s.code,{children:"podiumSend"})," method and the ",(0,n.jsx)(s.a,{href:"/docs/api/document",children:"document template"})," feature (Podium v4 and above) which will automatically include these assets."]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.em,{children:"Example"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"app.get('/', (req, res) => {\n    res.podiumSend(`<div>Content goes here</div>`);\n});\n"})}),"\n",(0,n.jsx)(s.h2,{id:"approach-2-upload-to-a-cdn-or-remote-server",children:"Approach 2: upload to a CDN or remote server"}),"\n",(0,n.jsx)(s.p,{children:"This approach involves each podlet uploading its assets to a predefined CDN location so that the layout can then include the CDN URLs in its HTML template."}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Step 1."})}),"\n",(0,n.jsx)(s.p,{children:"In your podlet, upload your assets to a CDN by whatever means necessary. You might do this whenever your podlet server starts up to ensure the latest version is available on the CDN."}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Step 2."})}),"\n",(0,n.jsx)(s.p,{children:"Next, tell the podlet the location of your assets so that it can populate the manifest file."}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.em,{children:"Example"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"podlet.js({ value: 'http://some-cdn.com/client.js' });\npodlet.css({ value: 'http://some-cdn.com/style.css' });\n"})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Step 3."})}),"\n",(0,n.jsxs)(s.p,{children:["Write your layout using the ",(0,n.jsx)(s.code,{children:"podiumSend"})," method and the ",(0,n.jsx)(s.a,{href:"/docs/api/document",children:"document template"})," feature (Podium v4 and above) which will automatically include these assets."]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.em,{children:"Example"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"app.get('/', (req, res) => {\n    res.podiumSend(`<div>Content goes here</div>`);\n});\n"})})]})}function h(e={}){const{wrapper:s}={...(0,o.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},1151:(e,s,t)=>{t.d(s,{Z:()=>i,a:()=>l});var n=t(7294);const o={},a=n.createContext(o);function l(e){const s=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),n.createElement(a.Provider,{value:s},e.children)}}}]);