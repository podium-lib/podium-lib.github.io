"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7069],{5886:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var o=n(5893),s=n(1151);const i={id:"context",title:"The Podium Context"},a=void 0,c={id:"layout/context",title:"The Podium Context",description:"The purpose of the Podium Context is to give a podlet access to background contextual information about each incoming HTTP request so that it can tailor its response accordingly. You can read more regarding the Podium context and how it applies to podlets in the podlet context guide.",source:"@site/docs/layout/context.md",sourceDirName:"layout",slug:"/layout/context",permalink:"/docs/layout/context",draft:!1,unlisted:!1,editUrl:"https://github.com/podium-lib/podium-lib.github.io/tree/main/website/docs/docs/layout/context.md",tags:[],version:"current",frontMatter:{id:"context",title:"The Podium Context"},sidebar:"sidebar",previous:{title:"Getting Started",permalink:"/docs/layout/getting_started"},next:{title:"Handling podlet unavailability",permalink:"/docs/layout/unavailable_podlets"}},r={},l=[{value:"Configuring context parsers",id:"configuring-context-parsers",level:3},{value:"Custom context parsers",id:"custom-context-parsers",level:3}];function d(e){const t={a:"a",code:"code",em:"em",h3:"h3",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.p,{children:["The purpose of the Podium Context is to give a podlet access to background contextual information about each incoming HTTP request so that it can tailor its response accordingly. You can read more regarding the Podium context and how it applies to podlets in the ",(0,o.jsx)(t.a,{href:"/docs/podlet/context",children:"podlet context guide"}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["The context, as it applies to Podium layouts, is always created in the layout server for each request to it. The ",(0,o.jsx)(t.code,{children:"@podium/layout"})," module defines a set of context parsers which are run in parallel by Podium layout middleware during each request. The results of these parsers are combined to form a context object which we then pass on to podlets when fetching their content."]}),"\n",(0,o.jsxs)(t.p,{children:["As we have seen, you must manually pass the context object on to podlets via a call to ",(0,o.jsx)(t.code,{children:".fetch(ctx)"}),". This call will convert the context object into Podium context HTTP headers which will in turn be converted back to a context object once received by a podlet."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.em,{children:"Example"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"app.get('/', (req, res) => {\n    const content = await gettingStarted.fetch(res.locals.podium);\n    ...\n});\n"})}),"\n",(0,o.jsx)(t.h3,{id:"configuring-context-parsers",children:"Configuring context parsers"}),"\n",(0,o.jsx)(t.p,{children:"Each of the default context parsers has a default configuration which should cover most use cases. It is, however, possible to overwrite default configuration when constructing a layout."}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.em,{children:"Example"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"const layout = new Layout({\n    ...\n    context: {\n        debug: {\n            enabled: true,\n        },\n    },\n});\n"})}),"\n",(0,o.jsxs)(t.p,{children:["In this example, we configure the default for the ",(0,o.jsx)(t.code,{children:"debug"})," context parser to be enabled."]}),"\n",(0,o.jsxs)(t.p,{children:["See the ",(0,o.jsx)(t.a,{href:"/docs/api/layout",children:"@podium/layout"})," api docs for more detailed documentation regarding configuring the default context parsers."]}),"\n",(0,o.jsx)(t.h3,{id:"custom-context-parsers",children:"Custom context parsers"}),"\n",(0,o.jsx)(t.p,{children:"It is possible to extend the Podium context by registering any number of additional parsers."}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.em,{children:"Example"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"import CustomContext from 'my-custom-context-parser';\n\n...\n\n// Register custom context with layout\nlayout.context.register('my-custom-context', new CustomContext());\n"})}),"\n",(0,o.jsxs)(t.p,{children:["In the example above, once run via layout middleware, a new camelCased value ",(0,o.jsx)(t.code,{children:"myCustomContext"})," will be available on the Podium context. This will then be sent over HTTP as a header with the name ",(0,o.jsx)(t.code,{children:"podium-my-custom-context"})," when fetching podlet content."]})]})}function u(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>c,a:()=>a});var o=n(7294);const s={},i=o.createContext(s);function a(e){const t=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),o.createElement(i.Provider,{value:t},e.children)}}}]);